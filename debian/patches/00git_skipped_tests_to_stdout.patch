From 88446980a25555ff112d1a8367903f441b1d9702 Mon Sep 17 00:00:00 2001
From: Martin Pitt <martinpitt@gnome.org>
Date: Fri, 23 Aug 2013 07:44:27 +0200
Subject: [PATCH] testsuite: Write "skip" messages to stdout instead of stderr

---
 NEWS                            |  4 ++++
 tests/test-umockdev-record.vala |  4 ++--
 tests/test-umockdev-run.vala    | 12 ++++++------
 3 files changed, 12 insertions(+), 8 deletions(-)

diff --git a/NEWS b/NEWS
index 62943c8..4351d76 100644
--- a/NEWS
+++ b/NEWS
@@ -1,3 +1,7 @@
+0.4.4 (UNRELEASED)
+------------------
+- testsuite: Write "skip" messages to stdout instead of stderr.
+
 0.4.3 (2013-08-23)
 ------------------
 - preload: Don't call overridden readlink() in helper function. Fixes building
diff --git a/tests/test-umockdev-record.vala b/tests/test-umockdev-record.vala
index f7ff4e6..f803d09 100644
--- a/tests/test-umockdev-record.vala
+++ b/tests/test-umockdev-record.vala
@@ -491,7 +491,7 @@ t_gphoto2_record ()
     }
     spawn ("gphoto2 --auto-detect", out sout, out serr, out exit);
     if (exit != 0) {
-        stderr.printf ("[SKIP: gphoto2 --auto-detect failed: %s] ", sout + serr);
+        stdout.printf ("[SKIP: gphoto2 --auto-detect failed: %s] ", sout + serr);
         return;
     }
 
@@ -504,7 +504,7 @@ t_gphoto2_record ()
     }
     MatchInfo match;
     if (!port_re.match (sout, 0, out match)) {
-        stderr.printf ("[SKIP: no gphoto2 compatible camera attached] ");
+        stdout.printf ("[SKIP: no gphoto2 compatible camera attached] ");
         return;
     }
     string busnum = match.fetch(1);
diff --git a/tests/test-umockdev-run.vala b/tests/test-umockdev-run.vala
index a2b4e64..1d18c2d 100644
--- a/tests/test-umockdev-run.vala
+++ b/tests/test-umockdev-run.vala
@@ -54,7 +54,7 @@ get_program_out (string program, string command, out string sout,
                  out string serr, out int exit)
 {
     if (!have_program (program)) {
-        stderr.printf ("[SKIP: %s not installed] ", program);
+        stdout.printf ("[SKIP: %s not installed] ", program);
         sout = "";
         serr = "";
         exit = -1;
@@ -267,7 +267,7 @@ check_gphoto_version ()
         return false;
 
     if (double.parse (words[1]) < 2.5) {
-        stderr.printf ("[SKIP: needs gphoto >= 2.5] ");
+        stdout.printf ("[SKIP: needs gphoto >= 2.5] ");
         return false;
     }
 
@@ -372,11 +372,11 @@ static void
 t_input_touchpad ()
 {
     if (BYTE_ORDER == ByteOrder.BIG_ENDIAN) {
-        stderr.printf ("[SKIP: this test only works on little endian machines] ");
+        stdout.printf ("[SKIP: this test only works on little endian machines] ");
         return;
     }
     if (!have_program ("Xorg")) {
-        stderr.printf ("[SKIP: Xorg not installed] ");
+        stdout.printf ("[SKIP: Xorg not installed] ");
         return;
     }
 
@@ -445,12 +445,12 @@ static void
 t_input_evtest ()
 {
     if (BYTE_ORDER == ByteOrder.BIG_ENDIAN) {
-        stderr.printf ("[SKIP: this test only works on little endian machines] ");
+        stdout.printf ("[SKIP: this test only works on little endian machines] ");
         return;
     }
 
     if (!have_program ("evtest")) {
-        stderr.printf ("[SKIP: evtest not installed] ");
+        stdout.printf ("[SKIP: evtest not installed] ");
         return;
     }
 
-- 
1.8.3.2

